{"ast":null,"code":"export class ChatBot{constructor(produtos,clientes,transacoes){this.produtos=void 0;this.clientes=void 0;this.transacoes=void 0;this.produtos=produtos;this.clientes=clientes;this.transacoes=transacoes;}processMessage(message){const msg=message.toLowerCase().trim();// Pergunta sobre gastos de cliente\nif(msg.includes('quanto')&&msg.includes('gastou')){return this.getClienteGastos(msg);}// Pergunta sobre estoque\nif(msg.includes('estoque')||msg.includes('quantidade')){return this.getEstoqueInfo(msg);}// Pergunta sobre produtos específicos\nif(msg.includes('placa solar')||msg.includes('placas solares')){return this.getPlacasSolaresInfo();}// Pergunta sobre total de vendas\nif(msg.includes('total')&&(msg.includes('vendas')||msg.includes('faturamento'))){return this.getTotalVendas();}// Pergunta sobre clientes\nif(msg.includes('cliente')&&msg.includes('quantos')){return this.getTotalClientes();}// Resposta padrão\nreturn this.getDefaultResponse();}getClienteGastos(message){// Extrair nome do cliente da mensagem\nconst words=message.split(' ');let clienteNome='';for(let i=0;i<words.length;i++){if(words[i].includes('cliente')&&i+1<words.length){clienteNome=words[i+1];break;}}if(!clienteNome){return'Por favor, especifique o nome do cliente. Exemplo: \"Quanto o cliente João gastou?\"';}const cliente=this.clientes.find(c=>c.nome.toLowerCase().includes(clienteNome.toLowerCase()));if(!cliente){return\"Cliente \\\"\".concat(clienteNome,\"\\\" n\\xE3o encontrado no sistema.\");}const transacoesCliente=this.transacoes.filter(t=>t.clienteId===cliente.id&&t.tipo==='saida');const totalGasto=transacoesCliente.reduce((sum,t)=>sum+t.valorTotal,0);return\"O cliente \".concat(cliente.nome,\" gastou um total de R$ \").concat(totalGasto.toFixed(2),\" em \").concat(transacoesCliente.length,\" transa\\xE7\\xF5es.\");}getEstoqueInfo(message){const totalProdutos=this.produtos.length;const produtosEmEstoque=this.produtos.filter(p=>p.quantidade>0).length;const produtosSemEstoque=totalProdutos-produtosEmEstoque;return\"Temos \".concat(totalProdutos,\" produtos cadastrados. \").concat(produtosEmEstoque,\" com estoque dispon\\xEDvel e \").concat(produtosSemEstoque,\" sem estoque.\");}getPlacasSolaresInfo(){const placasSolares=this.produtos.filter(p=>p.nome.toLowerCase().includes('placa')&&p.nome.toLowerCase().includes('solar'));if(placasSolares.length===0){return'Não encontrei placas solares cadastradas no sistema.';}const totalQuantidade=placasSolares.reduce((sum,p)=>sum+p.quantidade,0);const valorMedio=placasSolares.reduce((sum,p)=>sum+p.valor,0)/placasSolares.length;return\"Temos \".concat(placasSolares.length,\" tipos de placas solares cadastradas, com \").concat(totalQuantidade,\" unidades em estoque. Valor m\\xE9dio: R$ \").concat(valorMedio.toFixed(2),\".\");}getTotalVendas(){const vendas=this.transacoes.filter(t=>t.tipo==='saida');const totalVendas=vendas.reduce((sum,t)=>sum+t.valorTotal,0);return\"Total de vendas: R$ \".concat(totalVendas.toFixed(2),\" em \").concat(vendas.length,\" transa\\xE7\\xF5es.\");}getTotalClientes(){return\"Temos \".concat(this.clientes.length,\" clientes cadastrados no sistema.\");}getDefaultResponse(){const responses=['Posso ajudar com informações sobre estoque, clientes e vendas. Tente perguntar: \"Quanto o cliente João gastou?\" ou \"Quantas placas solares temos?\"','Estou aqui para ajudar! Pergunte sobre gastos de clientes, estoque de produtos ou total de vendas.','Você pode me perguntar sobre: gastos por cliente, quantidade em estoque, informações sobre produtos específicos ou totais de vendas.'];return responses[Math.floor(Math.random()*responses.length)];}}","map":{"version":3,"names":["ChatBot","constructor","produtos","clientes","transacoes","processMessage","message","msg","toLowerCase","trim","includes","getClienteGastos","getEstoqueInfo","getPlacasSolaresInfo","getTotalVendas","getTotalClientes","getDefaultResponse","words","split","clienteNome","i","length","cliente","find","c","nome","concat","transacoesCliente","filter","t","clienteId","id","tipo","totalGasto","reduce","sum","valorTotal","toFixed","totalProdutos","produtosEmEstoque","p","quantidade","produtosSemEstoque","placasSolares","totalQuantidade","valorMedio","valor","vendas","totalVendas","responses","Math","floor","random"],"sources":["C:/Users/Andrei/Documents/GitHub Projetos Andrakael/Alfa-Test/src/services/chatBot.ts"],"sourcesContent":["import { Produto, Cliente, Transacao } from '../types';\r\n\r\nexport class ChatBot {\r\n  private produtos: Produto[];\r\n  private clientes: Cliente[];\r\n  private transacoes: Transacao[];\r\n\r\n  constructor(produtos: Produto[], clientes: Cliente[], transacoes: Transacao[]) {\r\n    this.produtos = produtos;\r\n    this.clientes = clientes;\r\n    this.transacoes = transacoes;\r\n  }\r\n\r\n  processMessage(message: string): string {\r\n    const msg = message.toLowerCase().trim();\r\n\r\n    // Pergunta sobre gastos de cliente\r\n    if (msg.includes('quanto') && msg.includes('gastou')) {\r\n      return this.getClienteGastos(msg);\r\n    }\r\n\r\n    // Pergunta sobre estoque\r\n    if (msg.includes('estoque') || msg.includes('quantidade')) {\r\n      return this.getEstoqueInfo(msg);\r\n    }\r\n\r\n    // Pergunta sobre produtos específicos\r\n    if (msg.includes('placa solar') || msg.includes('placas solares')) {\r\n      return this.getPlacasSolaresInfo();\r\n    }\r\n\r\n    // Pergunta sobre total de vendas\r\n    if (msg.includes('total') && (msg.includes('vendas') || msg.includes('faturamento'))) {\r\n      return this.getTotalVendas();\r\n    }\r\n\r\n    // Pergunta sobre clientes\r\n    if (msg.includes('cliente') && msg.includes('quantos')) {\r\n      return this.getTotalClientes();\r\n    }\r\n\r\n    // Resposta padrão\r\n    return this.getDefaultResponse();\r\n  }\r\n\r\n  private getClienteGastos(message: string): string {\r\n    // Extrair nome do cliente da mensagem\r\n    const words = message.split(' ');\r\n    let clienteNome = '';\r\n    \r\n    for (let i = 0; i < words.length; i++) {\r\n      if (words[i].includes('cliente') && i + 1 < words.length) {\r\n        clienteNome = words[i + 1];\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!clienteNome) {\r\n      return 'Por favor, especifique o nome do cliente. Exemplo: \"Quanto o cliente João gastou?\"';\r\n    }\r\n\r\n    const cliente = this.clientes.find(c => \r\n      c.nome.toLowerCase().includes(clienteNome.toLowerCase())\r\n    );\r\n\r\n    if (!cliente) {\r\n      return `Cliente \"${clienteNome}\" não encontrado no sistema.`;\r\n    }\r\n\r\n    const transacoesCliente = this.transacoes.filter(t => \r\n      t.clienteId === cliente.id && t.tipo === 'saida'\r\n    );\r\n\r\n    const totalGasto = transacoesCliente.reduce((sum, t) => sum + t.valorTotal, 0);\r\n\r\n    return `O cliente ${cliente.nome} gastou um total de R$ ${totalGasto.toFixed(2)} em ${transacoesCliente.length} transações.`;\r\n  }\r\n\r\n  private getEstoqueInfo(message: string): string {\r\n    const totalProdutos = this.produtos.length;\r\n    const produtosEmEstoque = this.produtos.filter(p => p.quantidade > 0).length;\r\n    const produtosSemEstoque = totalProdutos - produtosEmEstoque;\r\n\r\n    return `Temos ${totalProdutos} produtos cadastrados. ${produtosEmEstoque} com estoque disponível e ${produtosSemEstoque} sem estoque.`;\r\n  }\r\n\r\n  private getPlacasSolaresInfo(): string {\r\n    const placasSolares = this.produtos.filter(p => \r\n      p.nome.toLowerCase().includes('placa') && p.nome.toLowerCase().includes('solar')\r\n    );\r\n\r\n    if (placasSolares.length === 0) {\r\n      return 'Não encontrei placas solares cadastradas no sistema.';\r\n    }\r\n\r\n    const totalQuantidade = placasSolares.reduce((sum, p) => sum + p.quantidade, 0);\r\n    const valorMedio = placasSolares.reduce((sum, p) => sum + p.valor, 0) / placasSolares.length;\r\n\r\n    return `Temos ${placasSolares.length} tipos de placas solares cadastradas, com ${totalQuantidade} unidades em estoque. Valor médio: R$ ${valorMedio.toFixed(2)}.`;\r\n  }\r\n\r\n  private getTotalVendas(): string {\r\n    const vendas = this.transacoes.filter(t => t.tipo === 'saida');\r\n    const totalVendas = vendas.reduce((sum, t) => sum + t.valorTotal, 0);\r\n\r\n    return `Total de vendas: R$ ${totalVendas.toFixed(2)} em ${vendas.length} transações.`;\r\n  }\r\n\r\n  private getTotalClientes(): string {\r\n    return `Temos ${this.clientes.length} clientes cadastrados no sistema.`;\r\n  }\r\n\r\n  private getDefaultResponse(): string {\r\n    const responses = [\r\n      'Posso ajudar com informações sobre estoque, clientes e vendas. Tente perguntar: \"Quanto o cliente João gastou?\" ou \"Quantas placas solares temos?\"',\r\n      'Estou aqui para ajudar! Pergunte sobre gastos de clientes, estoque de produtos ou total de vendas.',\r\n      'Você pode me perguntar sobre: gastos por cliente, quantidade em estoque, informações sobre produtos específicos ou totais de vendas.'\r\n    ];\r\n\r\n    return responses[Math.floor(Math.random() * responses.length)];\r\n  }\r\n}"],"mappings":"AAEA,MAAO,MAAM,CAAAA,OAAQ,CAKnBC,WAAWA,CAACC,QAAmB,CAAEC,QAAmB,CAAEC,UAAuB,CAAE,MAJvEF,QAAQ,aACRC,QAAQ,aACRC,UAAU,QAGhB,IAAI,CAACF,QAAQ,CAAGA,QAAQ,CACxB,IAAI,CAACC,QAAQ,CAAGA,QAAQ,CACxB,IAAI,CAACC,UAAU,CAAGA,UAAU,CAC9B,CAEAC,cAAcA,CAACC,OAAe,CAAU,CACtC,KAAM,CAAAC,GAAG,CAAGD,OAAO,CAACE,WAAW,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAExC;AACA,GAAIF,GAAG,CAACG,QAAQ,CAAC,QAAQ,CAAC,EAAIH,GAAG,CAACG,QAAQ,CAAC,QAAQ,CAAC,CAAE,CACpD,MAAO,KAAI,CAACC,gBAAgB,CAACJ,GAAG,CAAC,CACnC,CAEA;AACA,GAAIA,GAAG,CAACG,QAAQ,CAAC,SAAS,CAAC,EAAIH,GAAG,CAACG,QAAQ,CAAC,YAAY,CAAC,CAAE,CACzD,MAAO,KAAI,CAACE,cAAc,CAACL,GAAG,CAAC,CACjC,CAEA;AACA,GAAIA,GAAG,CAACG,QAAQ,CAAC,aAAa,CAAC,EAAIH,GAAG,CAACG,QAAQ,CAAC,gBAAgB,CAAC,CAAE,CACjE,MAAO,KAAI,CAACG,oBAAoB,CAAC,CAAC,CACpC,CAEA;AACA,GAAIN,GAAG,CAACG,QAAQ,CAAC,OAAO,CAAC,GAAKH,GAAG,CAACG,QAAQ,CAAC,QAAQ,CAAC,EAAIH,GAAG,CAACG,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAE,CACpF,MAAO,KAAI,CAACI,cAAc,CAAC,CAAC,CAC9B,CAEA;AACA,GAAIP,GAAG,CAACG,QAAQ,CAAC,SAAS,CAAC,EAAIH,GAAG,CAACG,QAAQ,CAAC,SAAS,CAAC,CAAE,CACtD,MAAO,KAAI,CAACK,gBAAgB,CAAC,CAAC,CAChC,CAEA;AACA,MAAO,KAAI,CAACC,kBAAkB,CAAC,CAAC,CAClC,CAEQL,gBAAgBA,CAACL,OAAe,CAAU,CAChD;AACA,KAAM,CAAAW,KAAK,CAAGX,OAAO,CAACY,KAAK,CAAC,GAAG,CAAC,CAChC,GAAI,CAAAC,WAAW,CAAG,EAAE,CAEpB,IAAK,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGH,KAAK,CAACI,MAAM,CAAED,CAAC,EAAE,CAAE,CACrC,GAAIH,KAAK,CAACG,CAAC,CAAC,CAACV,QAAQ,CAAC,SAAS,CAAC,EAAIU,CAAC,CAAG,CAAC,CAAGH,KAAK,CAACI,MAAM,CAAE,CACxDF,WAAW,CAAGF,KAAK,CAACG,CAAC,CAAG,CAAC,CAAC,CAC1B,MACF,CACF,CAEA,GAAI,CAACD,WAAW,CAAE,CAChB,MAAO,oFAAoF,CAC7F,CAEA,KAAM,CAAAG,OAAO,CAAG,IAAI,CAACnB,QAAQ,CAACoB,IAAI,CAACC,CAAC,EAClCA,CAAC,CAACC,IAAI,CAACjB,WAAW,CAAC,CAAC,CAACE,QAAQ,CAACS,WAAW,CAACX,WAAW,CAAC,CAAC,CACzD,CAAC,CAED,GAAI,CAACc,OAAO,CAAE,CACZ,mBAAAI,MAAA,CAAmBP,WAAW,qCAChC,CAEA,KAAM,CAAAQ,iBAAiB,CAAG,IAAI,CAACvB,UAAU,CAACwB,MAAM,CAACC,CAAC,EAChDA,CAAC,CAACC,SAAS,GAAKR,OAAO,CAACS,EAAE,EAAIF,CAAC,CAACG,IAAI,GAAK,OAC3C,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGN,iBAAiB,CAACO,MAAM,CAAC,CAACC,GAAG,CAAEN,CAAC,GAAKM,GAAG,CAAGN,CAAC,CAACO,UAAU,CAAE,CAAC,CAAC,CAE9E,mBAAAV,MAAA,CAAoBJ,OAAO,CAACG,IAAI,4BAAAC,MAAA,CAA0BO,UAAU,CAACI,OAAO,CAAC,CAAC,CAAC,SAAAX,MAAA,CAAOC,iBAAiB,CAACN,MAAM,uBAChH,CAEQT,cAAcA,CAACN,OAAe,CAAU,CAC9C,KAAM,CAAAgC,aAAa,CAAG,IAAI,CAACpC,QAAQ,CAACmB,MAAM,CAC1C,KAAM,CAAAkB,iBAAiB,CAAG,IAAI,CAACrC,QAAQ,CAAC0B,MAAM,CAACY,CAAC,EAAIA,CAAC,CAACC,UAAU,CAAG,CAAC,CAAC,CAACpB,MAAM,CAC5E,KAAM,CAAAqB,kBAAkB,CAAGJ,aAAa,CAAGC,iBAAiB,CAE5D,eAAAb,MAAA,CAAgBY,aAAa,4BAAAZ,MAAA,CAA0Ba,iBAAiB,kCAAAb,MAAA,CAA6BgB,kBAAkB,kBACzH,CAEQ7B,oBAAoBA,CAAA,CAAW,CACrC,KAAM,CAAA8B,aAAa,CAAG,IAAI,CAACzC,QAAQ,CAAC0B,MAAM,CAACY,CAAC,EAC1CA,CAAC,CAACf,IAAI,CAACjB,WAAW,CAAC,CAAC,CAACE,QAAQ,CAAC,OAAO,CAAC,EAAI8B,CAAC,CAACf,IAAI,CAACjB,WAAW,CAAC,CAAC,CAACE,QAAQ,CAAC,OAAO,CACjF,CAAC,CAED,GAAIiC,aAAa,CAACtB,MAAM,GAAK,CAAC,CAAE,CAC9B,MAAO,sDAAsD,CAC/D,CAEA,KAAM,CAAAuB,eAAe,CAAGD,aAAa,CAACT,MAAM,CAAC,CAACC,GAAG,CAAEK,CAAC,GAAKL,GAAG,CAAGK,CAAC,CAACC,UAAU,CAAE,CAAC,CAAC,CAC/E,KAAM,CAAAI,UAAU,CAAGF,aAAa,CAACT,MAAM,CAAC,CAACC,GAAG,CAAEK,CAAC,GAAKL,GAAG,CAAGK,CAAC,CAACM,KAAK,CAAE,CAAC,CAAC,CAAGH,aAAa,CAACtB,MAAM,CAE5F,eAAAK,MAAA,CAAgBiB,aAAa,CAACtB,MAAM,+CAAAK,MAAA,CAA6CkB,eAAe,8CAAAlB,MAAA,CAAyCmB,UAAU,CAACR,OAAO,CAAC,CAAC,CAAC,MAChK,CAEQvB,cAAcA,CAAA,CAAW,CAC/B,KAAM,CAAAiC,MAAM,CAAG,IAAI,CAAC3C,UAAU,CAACwB,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACG,IAAI,GAAK,OAAO,CAAC,CAC9D,KAAM,CAAAgB,WAAW,CAAGD,MAAM,CAACb,MAAM,CAAC,CAACC,GAAG,CAAEN,CAAC,GAAKM,GAAG,CAAGN,CAAC,CAACO,UAAU,CAAE,CAAC,CAAC,CAEpE,6BAAAV,MAAA,CAA8BsB,WAAW,CAACX,OAAO,CAAC,CAAC,CAAC,SAAAX,MAAA,CAAOqB,MAAM,CAAC1B,MAAM,uBAC1E,CAEQN,gBAAgBA,CAAA,CAAW,CACjC,eAAAW,MAAA,CAAgB,IAAI,CAACvB,QAAQ,CAACkB,MAAM,sCACtC,CAEQL,kBAAkBA,CAAA,CAAW,CACnC,KAAM,CAAAiC,SAAS,CAAG,CAChB,oJAAoJ,CACpJ,oGAAoG,CACpG,sIAAsI,CACvI,CAED,MAAO,CAAAA,SAAS,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAGH,SAAS,CAAC5B,MAAM,CAAC,CAAC,CAChE,CACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}