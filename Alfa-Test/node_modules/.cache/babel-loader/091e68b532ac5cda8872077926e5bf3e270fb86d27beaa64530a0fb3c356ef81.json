{"ast":null,"code":"export class ChatBot {\n  constructor(produtos, clientes, transacoes) {\n    this.produtos = void 0;\n    this.clientes = void 0;\n    this.transacoes = void 0;\n    this.produtos = produtos;\n    this.clientes = clientes;\n    this.transacoes = transacoes;\n  }\n  processMessage(message) {\n    const msg = message.toLowerCase().trim();\n\n    // Pergunta sobre gastos de cliente\n    if (msg.includes('quanto') && msg.includes('gastou')) {\n      return this.getClienteGastos(msg);\n    }\n\n    // Pergunta sobre estoque\n    if (msg.includes('estoque') || msg.includes('quantidade')) {\n      return this.getEstoqueInfo(msg);\n    }\n\n    // Pergunta sobre produtos específicos\n    if (msg.includes('placa solar') || msg.includes('placas solares')) {\n      return this.getPlacasSolaresInfo();\n    }\n\n    // Pergunta sobre total de vendas\n    if (msg.includes('total') && (msg.includes('vendas') || msg.includes('faturamento'))) {\n      return this.getTotalVendas();\n    }\n\n    // Pergunta sobre clientes\n    if (msg.includes('cliente') && msg.includes('quantos')) {\n      return this.getTotalClientes();\n    }\n\n    // Resposta padrão\n    return this.getDefaultResponse();\n  }\n  getClienteGastos(message) {\n    // Extrair nome do cliente da mensagem\n    const words = message.split(' ');\n    let clienteNome = '';\n    for (let i = 0; i < words.length; i++) {\n      if (words[i].includes('cliente') && i + 1 < words.length) {\n        clienteNome = words[i + 1];\n        break;\n      }\n    }\n    if (!clienteNome) {\n      return 'Por favor, especifique o nome do cliente. Exemplo: \"Quanto o cliente João gastou?\"';\n    }\n    const cliente = this.clientes.find(c => c.nome.toLowerCase().includes(clienteNome.toLowerCase()));\n    if (!cliente) {\n      return `Cliente \"${clienteNome}\" não encontrado no sistema.`;\n    }\n    const transacoesCliente = this.transacoes.filter(t => t.clienteId === cliente.id && t.tipo === 'saida');\n    const totalGasto = transacoesCliente.reduce((sum, t) => sum + t.valorTotal, 0);\n    return `O cliente ${cliente.nome} gastou um total de R$ ${totalGasto.toFixed(2)} em ${transacoesCliente.length} transações.`;\n  }\n  getEstoqueInfo(message) {\n    const totalProdutos = this.produtos.length;\n    const produtosEmEstoque = this.produtos.filter(p => p.quantidade > 0).length;\n    const produtosSemEstoque = totalProdutos - produtosEmEstoque;\n    return `Temos ${totalProdutos} produtos cadastrados. ${produtosEmEstoque} com estoque disponível e ${produtosSemEstoque} sem estoque.`;\n  }\n  getPlacasSolaresInfo() {\n    const placasSolares = this.produtos.filter(p => p.nome.toLowerCase().includes('placa') && p.nome.toLowerCase().includes('solar'));\n    if (placasSolares.length === 0) {\n      return 'Não encontrei placas solares cadastradas no sistema.';\n    }\n    const totalQuantidade = placasSolares.reduce((sum, p) => sum + p.quantidade, 0);\n    const valorMedio = placasSolares.reduce((sum, p) => sum + p.valor, 0) / placasSolares.length;\n    return `Temos ${placasSolares.length} tipos de placas solares cadastradas, com ${totalQuantidade} unidades em estoque. Valor médio: R$ ${valorMedio.toFixed(2)}.`;\n  }\n  getTotalVendas() {\n    const vendas = this.transacoes.filter(t => t.tipo === 'saida');\n    const totalVendas = vendas.reduce((sum, t) => sum + t.valorTotal, 0);\n    return `Total de vendas: R$ ${totalVendas.toFixed(2)} em ${vendas.length} transações.`;\n  }\n  getTotalClientes() {\n    return `Temos ${this.clientes.length} clientes cadastrados no sistema.`;\n  }\n  getDefaultResponse() {\n    const responses = ['Posso ajudar com informações sobre estoque, clientes e vendas. Tente perguntar: \"Quanto o cliente João gastou?\" ou \"Quantas placas solares temos?\"', 'Estou aqui para ajudar! Pergunte sobre gastos de clientes, estoque de produtos ou total de vendas.', 'Você pode me perguntar sobre: gastos por cliente, quantidade em estoque, informações sobre produtos específicos ou totais de vendas.'];\n    return responses[Math.floor(Math.random() * responses.length)];\n  }\n}","map":{"version":3,"names":["ChatBot","constructor","produtos","clientes","transacoes","processMessage","message","msg","toLowerCase","trim","includes","getClienteGastos","getEstoqueInfo","getPlacasSolaresInfo","getTotalVendas","getTotalClientes","getDefaultResponse","words","split","clienteNome","i","length","cliente","find","c","nome","transacoesCliente","filter","t","clienteId","id","tipo","totalGasto","reduce","sum","valorTotal","toFixed","totalProdutos","produtosEmEstoque","p","quantidade","produtosSemEstoque","placasSolares","totalQuantidade","valorMedio","valor","vendas","totalVendas","responses","Math","floor","random"],"sources":["C:/Users/Andrei/Documents/GitHub Projetos Andrakael/Alfa-Test/src/services/chatBot.ts"],"sourcesContent":["import { Produto, Cliente, Transacao } from '../types';\r\n\r\nexport class ChatBot {\r\n  private produtos: Produto[];\r\n  private clientes: Cliente[];\r\n  private transacoes: Transacao[];\r\n\r\n  constructor(produtos: Produto[], clientes: Cliente[], transacoes: Transacao[]) {\r\n    this.produtos = produtos;\r\n    this.clientes = clientes;\r\n    this.transacoes = transacoes;\r\n  }\r\n\r\n  processMessage(message: string): string {\r\n    const msg = message.toLowerCase().trim();\r\n\r\n    // Pergunta sobre gastos de cliente\r\n    if (msg.includes('quanto') && msg.includes('gastou')) {\r\n      return this.getClienteGastos(msg);\r\n    }\r\n\r\n    // Pergunta sobre estoque\r\n    if (msg.includes('estoque') || msg.includes('quantidade')) {\r\n      return this.getEstoqueInfo(msg);\r\n    }\r\n\r\n    // Pergunta sobre produtos específicos\r\n    if (msg.includes('placa solar') || msg.includes('placas solares')) {\r\n      return this.getPlacasSolaresInfo();\r\n    }\r\n\r\n    // Pergunta sobre total de vendas\r\n    if (msg.includes('total') && (msg.includes('vendas') || msg.includes('faturamento'))) {\r\n      return this.getTotalVendas();\r\n    }\r\n\r\n    // Pergunta sobre clientes\r\n    if (msg.includes('cliente') && msg.includes('quantos')) {\r\n      return this.getTotalClientes();\r\n    }\r\n\r\n    // Resposta padrão\r\n    return this.getDefaultResponse();\r\n  }\r\n\r\n  private getClienteGastos(message: string): string {\r\n    // Extrair nome do cliente da mensagem\r\n    const words = message.split(' ');\r\n    let clienteNome = '';\r\n    \r\n    for (let i = 0; i < words.length; i++) {\r\n      if (words[i].includes('cliente') && i + 1 < words.length) {\r\n        clienteNome = words[i + 1];\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (!clienteNome) {\r\n      return 'Por favor, especifique o nome do cliente. Exemplo: \"Quanto o cliente João gastou?\"';\r\n    }\r\n\r\n    const cliente = this.clientes.find(c => \r\n      c.nome.toLowerCase().includes(clienteNome.toLowerCase())\r\n    );\r\n\r\n    if (!cliente) {\r\n      return `Cliente \"${clienteNome}\" não encontrado no sistema.`;\r\n    }\r\n\r\n    const transacoesCliente = this.transacoes.filter(t => \r\n      t.clienteId === cliente.id && t.tipo === 'saida'\r\n    );\r\n\r\n    const totalGasto = transacoesCliente.reduce((sum, t) => sum + t.valorTotal, 0);\r\n\r\n    return `O cliente ${cliente.nome} gastou um total de R$ ${totalGasto.toFixed(2)} em ${transacoesCliente.length} transações.`;\r\n  }\r\n\r\n  private getEstoqueInfo(message: string): string {\r\n    const totalProdutos = this.produtos.length;\r\n    const produtosEmEstoque = this.produtos.filter(p => p.quantidade > 0).length;\r\n    const produtosSemEstoque = totalProdutos - produtosEmEstoque;\r\n\r\n    return `Temos ${totalProdutos} produtos cadastrados. ${produtosEmEstoque} com estoque disponível e ${produtosSemEstoque} sem estoque.`;\r\n  }\r\n\r\n  private getPlacasSolaresInfo(): string {\r\n    const placasSolares = this.produtos.filter(p => \r\n      p.nome.toLowerCase().includes('placa') && p.nome.toLowerCase().includes('solar')\r\n    );\r\n\r\n    if (placasSolares.length === 0) {\r\n      return 'Não encontrei placas solares cadastradas no sistema.';\r\n    }\r\n\r\n    const totalQuantidade = placasSolares.reduce((sum, p) => sum + p.quantidade, 0);\r\n    const valorMedio = placasSolares.reduce((sum, p) => sum + p.valor, 0) / placasSolares.length;\r\n\r\n    return `Temos ${placasSolares.length} tipos de placas solares cadastradas, com ${totalQuantidade} unidades em estoque. Valor médio: R$ ${valorMedio.toFixed(2)}.`;\r\n  }\r\n\r\n  private getTotalVendas(): string {\r\n    const vendas = this.transacoes.filter(t => t.tipo === 'saida');\r\n    const totalVendas = vendas.reduce((sum, t) => sum + t.valorTotal, 0);\r\n\r\n    return `Total de vendas: R$ ${totalVendas.toFixed(2)} em ${vendas.length} transações.`;\r\n  }\r\n\r\n  private getTotalClientes(): string {\r\n    return `Temos ${this.clientes.length} clientes cadastrados no sistema.`;\r\n  }\r\n\r\n  private getDefaultResponse(): string {\r\n    const responses = [\r\n      'Posso ajudar com informações sobre estoque, clientes e vendas. Tente perguntar: \"Quanto o cliente João gastou?\" ou \"Quantas placas solares temos?\"',\r\n      'Estou aqui para ajudar! Pergunte sobre gastos de clientes, estoque de produtos ou total de vendas.',\r\n      'Você pode me perguntar sobre: gastos por cliente, quantidade em estoque, informações sobre produtos específicos ou totais de vendas.'\r\n    ];\r\n\r\n    return responses[Math.floor(Math.random() * responses.length)];\r\n  }\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}